<template>
    <div class="compoment__AllPopup AllPopup">
        <Popup
            :value="value"
            :overlay="true"
            position="top"
            :overlay-style="{ top: top + 'px' }"
            :slot-style="{ top: top + 'px', overflow: 'hidden' }"
            @input="onPopInput"
        >
            <div
                class="popup flex f-fd-r f-fw-w"
                :style="customStyle.popupStyle"
            >
                <div
                    v-for="(item, index) in list"
                    :key="index"
                    :class="active === item.name ? 'popup__item popup__item--active' : 'popup__item'"
                    :style="[customStyle.tabStyle, active === item.name ? customStyle.tabActiveStyle : {}]"
                    @click="$emit('change', { item, index })"
                >
                    {{ item.label }}
                </div>
            </div>
        </Popup>
    </div>
</template>

<script>
    import Popup from '@wanwu/base-vue-popup';
    export default {
        name: 'TabsAllPopup',
        components: {
            Popup,
        },
        props: {
            value: {
                type: Boolean,
            },
            active: {
                type: [
                    Number,
                    String,
                ],
                default: 0,
            },
            list: {
                type: Array,
                default: () => [],
            },
            top: {
                type: Number,
                default: 0,
            },
            customStyle: {
                type: Object,
                default: () => ({}),
            },
        },
        watch: {
            value(val) {
                if (val) {
                    document.documentElement.style.overflow = 'hidden';
                } else {
                    document.documentElement.style.overflow = '';
                }
            },
        },
        methods: {
            onPopInput(...argvs) {
                this.$emit('input', ...argvs);
            },
        },
    };
</script>

<style lang="less" scoped>
.compoment__AllPopup {
    position: relative;
    z-index: 1001;

    .popup__icon {
        height: 88px;
        padding: 0 28px;
        background-color: #fff;
        display: flex;
        align-items: center;
        justify-content: flex-end;

        i {
            font-size: 48px;
            font-weight: 500;
            line-height: 88px;
        }
    }

    .popup {
        background-color: #fff;
        padding: 88px 19px 20px;

        .popup__item {
            width: 160px;
            height: 72px;
            line-height: 72px;
            background: rgba(244, 245, 245, 1);
            border-radius: 4px;
            border: 2px solid rgba(234, 234, 235, 1);
            font-size: 28px;
            text-align: center;
            font-weight: 400;
            color: #2e333b;
            margin: 0 9px 28px;
        }

        .popup__item--active {
            background: rgba(251, 233, 235, 1);
            font-weight: 500;
            color: rgba(207, 20, 43, 1);
            border: 1px solid rgba(207, 20, 43, 0.1);
        }
    }
}
</style>
