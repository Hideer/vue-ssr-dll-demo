/**
 * Create by changsheng on 2019-04-12 11:29
 */

const RouterConfig = require('./predeploy');

const PluginName = 'ConfigWebpackPlugin';

class DeployWebpackPlugin {

    constructor(options) {
        this.options = options;
    }

    apply(compiler) {
        // compiler.hooks.watchRun.tapAsync(PluginName, (compilation, callback) => {
        //     // RouterConfig.getRouterConfig();
        //     callback();
        // });

        compiler.hooks.afterPlugins.tap(PluginName, () => {
            RouterConfig.getRouterConfig(this.options);
        });
    }
}

module.exports = DeployWebpackPlugin;

