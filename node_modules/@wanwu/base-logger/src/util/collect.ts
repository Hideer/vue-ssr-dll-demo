// collect.js 采集打点相关数据
import config from '../config';

const collect = {
    // 采集时间戳
    getTime(): number {
        return (new Date()).getTime();
    },
    // 采集用户信息
    getUserInfo(): any {
       const userInfoStr = localStorage.getItem(config.UserInfoKey) || '{}';
       return JSON.parse(userInfoStr);
    },
    // 采集打点环境
    getEnv(): any {
        let env = '';
        if (window && window.location && window.location.host) {
            const host = window.location.host;
            // const env_production_host = config.env_production_host;
            // if (env_production_host.test(host)) {
            //     env = 'production';
            // } else {
            //     env = 'dev';
            // }
            if (host.indexOf('dev') > -1 || host.indexOf('localhost') > -1 || host.indexOf('127.0.0.1') > -1) {
                env = 'dev';
            } else if(host.indexOf('pre') > -1) {
                env = 'pre';
            } else {
                env = 'production';
            }
        }
        return env;
    },
};

export default collect;
