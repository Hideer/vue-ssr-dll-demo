"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var base_fn_1 = require("@wanwu/base-fn");
var index_1 = require("../index");
/**
 * 全局为跳转链接增加rtp参数
 * @param Vue
 * @param options
 */
var VueCreateRtp = function (Vue, options) {
    if (options === void 0) { options = {}; }
    // 有些页面没有记录的必要，可以加黑名单过滤避免加上rtp
    var router = options.router, blackList = options.blackList;
    router.beforeEach(function (to, from, next) {
        if (to.fullPath !== '/' &&
            (blackList ? blackList.indexOf(to.path) === -1 : true) &&
            !base_fn_1.fn.getQueryString('rtp', to.fullPath)) {
            next({ path: index_1.createRtpParams(to.fullPath), replace: true });
        }
        else {
            next();
        }
    });
};
exports.default = {
    install: function (Vue, options) {
        VueCreateRtp(Vue, options);
    },
};
