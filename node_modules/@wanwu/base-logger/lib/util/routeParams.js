"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// 用于js代码跳转页面时 补充埋点信息
var base_fn_1 = require("@wanwu/base-fn");
var cross_1 = require("./cross");
var routeUtil = {
    // route跳转时需要默认拼上的参数
    paramsList: [
        'rtpApplication', 'traceLink'
    ],
    // url处理
    parseUrl: function (url) {
        try {
            this.paramsList.map(function (item) {
                // 获取顺序window.name => sessionStorage => url
                var paramData = cross_1.default.getWindowNameItem(item) || sessionStorage.getItem(item) || base_fn_1.fn.getQueryString(item) || '';
                if (Object.prototype.toString.call(paramData) === "[object Object]") {
                    paramData = JSON.stringify(paramData);
                }
                if (url instanceof Object) {
                    var paramObj = {};
                    paramObj[item] = paramData;
                    url.query = Object.assign({}, url.query, paramObj);
                }
                else {
                    url = url.replace(/(#.+)$/, '');
                    url = base_fn_1.fn.setQueryString(url, item, paramData);
                }
            });
            return url;
        }
        catch (err) {
            console.log(err);
        }
    }
};
exports.default = routeUtil;
