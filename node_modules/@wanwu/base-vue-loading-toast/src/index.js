import comp from './index.vue';
import Vue from 'vue';
import getCompDefaultOptions from '@wanwu/get-comp-default-options';
const defaultOptions = getCompDefaultOptions(comp);
const ToastConstructor = Vue.extend(comp);
let instance;
class LoadingToast {
    static show(options) {
        if (!instance) {
            instance = new ToastConstructor().$mount(document.createElement('div'));
            instance.$on('input', (val) => {
                instance.value = val;
            });
            document.body.appendChild(instance.$el);
        }
        Object.assign(instance, defaultOptions);
        if (options) {
            if (typeof options === 'string') {
                Object.assign(instance, {
                    loadingText: options,
                });
            } else {
                Object.assign(instance, options);
            }
        }
        instance.value = true;
    }

    static close() {
        if (instance) { instance.value = false; }
    }
}

comp.install = (Vue) => {
    Vue.component(comp.name, comp);
    Vue.prototype.$loadingToast = LoadingToast;
    Vue.loadingToast = LoadingToast;
};
export {
    LoadingToast,
};
export default comp;
