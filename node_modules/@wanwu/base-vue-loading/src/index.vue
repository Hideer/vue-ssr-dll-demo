<template>
    <div
        class="loading"
        :style="style"
    >
        <svg
            v-if="loadType === 'line'"
            class="load"
            viewBox="10 10 80 80"
            style="stroke: currentColor; fill: none;"
        >
            <circle
                class="circle"
                cx="50"
                cy="50"
                r="30"
            />
        </svg>
        <svg
            v-else
            x="0px"
            y="0px"
            viewBox="0 0 54 54"
            class="load"
            style="fill: currentColor; stroke: none;"
        >
            <circle
                v-for="(item,index) in point"
                :key="index"
                :cx="item.x"
                :cy="item.y"
                :r="1.5 + (0.5 * index)"
            />
        </svg>
    </div>
</template>
<script>
    // import 'iview';
    export default {
        name: 'Loading',
        props: {
            size: {
                type: Number,
                default: 50,
            },
            color: {
                type: String,
                default: '#c9c9c9',
            },
            loadType: {
                type: String,
                default: 'line',
                validator(value) {
                    // 这个值必须匹配下列字符串中的一个
                    return [
                        // 环形线
                        'line',
                        // 点状
                        'point',
                    ].indexOf(value) !== -1;
                },
            },
        },
        computed: {
            style() {
                return {
                    color: this.color,
                    width: this.size / 100 + 'rem',
                    height: this.size / 100 + 'rem',
                };
            },
            point() {
                var point = [];
                const r = 19; const ox = 27; const oy = 27; const count = 8;
                var radians = (Math.PI / 180) * Math.round(360 / count); // 弧度
                var i = 0;
                for (; i < count; i++) {
                    var x = ox + r * Math.sin(radians * i);
                    var y = oy + r * Math.cos(radians * i);

                    point.unshift({
                        x: x,
                        y: y,
                    }); // 为保持数据顺时针
                }
                return point;
            },
        },
    };
</script>
<style lang="less" scoped>
.loading {
    display: inline-block;
}

.div {
    display: flex;
}

.load {
    animation: rotate 2s linear infinite;
    width: 100%;
    // stroke: currentColor;
    // fill: currentColor;
}

.circle {
    // stroke: currentColor;
    stroke-width: 3;
    // fill: none;
    animation: dash 1.5s linear infinite;
}

@keyframes rotate {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

@keyframes dash {
    0% {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0;
    }

    50% {
        stroke-dasharray: 130, 200;
        stroke-dashoffset: -50;
    }

    100% {
        stroke-dasharray: 130, 200;
        stroke-dashoffset: -188;
    }
}
</style>
