# hdp h5调用app方法插件

### 介绍

h5调用app方法插件

## 代码演示

```javascript
import hdp from '@wanwu/hdp';
// 原始调用方法
hdp.exec(service[插件名], action[方法名], ...args[参数列表])

// 二次封装，类似request调用api
hdp.execRequest(service[插件名], action[方法名], ...args[参数列表])

// ============================= 方法集合：============================
// app中跳转到app页面（appPath：zdwh://wwdz/*** ）
hdp.exec('PluginRouter', 'jumpApp', { linkUrl: appPath });

// 调用app分享到微信
hdp.exec('PluginShare', 'wechat', {
    scene, // 分享场景
    mediaType, // 分享媒体消息类型
    mediaObject: { imageData },
});

hdp.exec('PluginShare', 'h5Normal', { title, desc, link, imgUrl});

// 调用app的保存照片
hdp.exec('PluginShare', 'photoSave', { imageData: image })

// 
hdp.exec('PluginShare', 'oneClickTimeline', {});

// 调用app扫码
hdp.exec('PluginNavigation', 'scanCode')

// 显示、隐藏app的头部
hdp.exec('PluginNavigation', 'showNativeNavigation', false);

// 关闭app中的webView容器
hdp.exec('PluginNavigation', 'pageFinish', {
    finishWebView: true,
    closeIndexWebView: true, // 非必须
});

// 获取状态栏高度
hdp.execRequest('PluginNavigation', 'pageStatusHeight')

// 调用客户端支付
hdp.execRequest('PluginNavigation', 'pagePayment', { payMethod, payId })

// 调起打电话
hdp.exec('PluginNavigation', 'callPhone', { number: phone });

// 调用app的直播小窗
hdp.exec('PluginLive', 'showLiveMiniView', { liveingFlag, roomId, livePlayUrl, roomImg, invitationCode });

// ios设置localStorage值
hdp.exec('PluginCommon', 'setPersistValue', { key, value })

// ios获取localStorage值
hdp.exec('PluginCommon', 'getPersistValue', { key })

// ios清空localStorage值
hdp.exec('PluginCommon', 'clearPersistValue', { key })

// 添加日历（通用方法）
hdp.exec('PluginCommon', 'addRemind', {
    startTime, // 开始时间（ms）
    endTime, // 结束时间（ms）
    eventTitle, // 事件名称
    eventDes, // 描述
    eventLocation: '', // 位置
    alarmArray: [], // 提前提醒时间数组 例如：-60 为提前一分钟
})

// 添加日历（直播专用方法）
hdp.exec('PluginCommon', 'addLiveCalendar', {
    title,
    description,
    location,
    startTime, //（s）
    endTime, //（s），根据开始时间往后延1小时
    repeat: '',
    remindTime, // 单位分钟
    url, // 跳转url
})

// 打开微信
hdp.exec('PluginCommon', 'openWechat');

// 异常上报
hdp.exec('PluginCommon', 'uploadLog', {});

// 安卓获取设备信息
hdp.exec('PluginCommon', 'getDeviceInfo')

// 调用粘贴
hdp.exec('PluginCommon', 'clipboardManager', { type: 0 })
    .then(res => {})
    .catch(err => {})

// 选择图片
hdp.execRequest('PluginNavigation', 'pageImagePicker', { type, maxCount })

// 打开媒体播放器
hdp.execRequest('PluginNavigation', 'mediaBrowser', { type, url: [] });

// 
hdp.execRequest('PluginNavigation', 'paySuccess399', { payId });

// 
hdp.exec('PluginNavigation', 'configBounces', { data: true });

// 
hdp.exec('PluginTouch', 'requestEvenet', true);

```

### CHANGELOG
+ `2.1.5`  更新日期：2021-04-13，更新者：慕辰
   1. hdp方法文档总结；

+ `2.1.4`  更新日期：2021-03-22，更新者：慕辰
   1. 迁移至盘古管理系统；
   
+ `2.1.3`  更新日期：2021-03-20，更新者：六谷
   1. 修改一些判断，版本控制时将wwdz_b2b（收藏集市）排除在外
