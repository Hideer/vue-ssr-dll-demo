(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@wanwu/base-fn')) :
    typeof define === 'function' && define.amd ? define(['exports', '@wanwu/base-fn'], factory) :
    (global = global || self, factory(global.index = {}, global.baseFn));
}(this, (function (exports, baseFn) { 'use strict';

    var handleRequestUrl = (function (url) {
      var __env = baseFn.fn.getQueryString('__env');

      var newUrl = '';

      if (!/^http(s)?:\/\//.test(url)) {
        var prefix, baseUrl;

        if (/^api\//.test(url)) {
          // `api/`开头
          prefix = '/';
        } else if (/^\//.test(url)) {
          // `/`开头
          prefix = '';
        } else {
          prefix = '/api/v1/mall/';
        }

        if (__env === 'custom') {
          baseUrl = 'http://192.168.20.108:8085';
        } else if (__env === 'useip') {
          var useip = baseFn.fn.getQueryString('__useip');
          var useport = baseFn.fn.getQueryString('__useport');
          baseUrl = "http://".concat(useip, ":").concat(useport || 8085);
        } else if (__env === 'dev') {
          baseUrl = 'http://mall-portal-dev2.wanwudezhi.com';
        } else if (__env === 'develop') {
          baseUrl = 'http://gitlab.wanwudezhi.com';
        } else if (__env === 'pre') {
          baseUrl = 'http://pre-portal.wanwudezhi.com';
        } else {
          baseUrl = 'https://api.wanwudezhi.com';
        }

        newUrl = baseUrl + prefix + url;
      }

      return newUrl || url;
    });

    exports.default = handleRequestUrl;

    Object.defineProperty(exports, '__esModule', { value: true });

})));
