'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var baseFn = require('@wanwu/base-fn');

var handleRequestUrl = (function (url) {
  var __env = baseFn.fn.getQueryString('__env');

  var newUrl = '';

  if (!/^http(s)?:\/\//.test(url)) {
    var prefix, baseUrl;

    if (/^api\//.test(url)) {
      // `api/`开头
      prefix = '/';
    } else if (/^\//.test(url)) {
      // `/`开头
      prefix = '';
    } else {
      prefix = '/api/v1/mall/';
    }

    if (__env === 'custom') {
      baseUrl = 'http://192.168.20.108:8085';
    } else if (__env === 'useip') {
      var useip = baseFn.fn.getQueryString('__useip');
      var useport = baseFn.fn.getQueryString('__useport');
      baseUrl = "http://".concat(useip, ":").concat(useport || 8085);
    } else if (__env === 'dev') {
      baseUrl = 'http://mall-portal-dev2.wanwudezhi.com';
    } else if (__env === 'develop') {
      baseUrl = 'http://gitlab.wanwudezhi.com';
    } else if (__env === 'pre') {
      baseUrl = 'http://pre-portal.wanwudezhi.com';
    } else {
      baseUrl = 'https://api.wanwudezhi.com';
    }

    newUrl = baseUrl + prefix + url;
  }

  return newUrl || url;
});

exports.default = handleRequestUrl;
