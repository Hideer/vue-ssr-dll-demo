# location&LocationLink vueRouter 二次封装

### 介绍

vueRouter 二次封装，单页面应用实现传统多页面应用路由跳转体验

### 基本用法

#### main.js

```js
import Vue from "vue";
import router from "./router";
import LocationLink from "@wanwu/base-vue-location-link";
const options = {router};


Vue.use(LocationLink,options)


// 如果你在beforeEach中重定向了路由，或者对路由的目标路径做了处理
router.beforeEach((to, from, next) => {
    let query = getRouteQuery(to, from);
    delete query.replace;
    if (JSON.stringify(query) !== JSON.stringify(to.query)) {
        next({
            path: to.path,
            query,
            replace: to.query.replace === "1"
        });
    } else {
        next();
    }
});
```

#### app.vue

```html
<keep-alive :max="5">
    <router-view :key="this.$route.fullPath"></router-view>
</keep-alive>
```

### LocationLink
```html
<LocationLink :to="{path:/home/index,query:{type:1}}">
跳转链接
</LocationLink>
```

### props

| 参数    | 说明                  | 类型        | 默认值 | 版本 |
| ------- | --------------------- | ----------- | ------ | ---- |
| to | router对象 | _Object_    | -      | -    |
| replace | 是否是replace跳转 | _Boolean_    | -      | -    |

## $location 方法调用

### 参数

| 参数    | 说明                  | 类型        | 默认值 | 版本 |
| ------- | --------------------- | ----------- | ------ | ---- |
| options | options               | _Object_    | -      | -    |

## Options

| 参数          | 说明                                           | 类型       | 默认值      | 版本 |
| ------------- | ---------------------------------------------- | ---------- | ----------- | ---- |
| router    | vue-router对象实例                | _Object_      | -           | -    |
| replaceReg    | 判断将完整 url 裁切成路由的规则                | _Reg_      | -           | -    |
| preprocessing | path 的前置处理方法                            | _Function_ | -           | -    |
| timeKey       | 时间戳的 key，会加在 url 上                    | _String_   | `__HgWtwYU` | -    |
| historyKey    | pushState 的路径存储的 key，避免重复 pushState | _String_   | `__mTwWuNi` | -    |
| replaceKey    | replaceKey | _String_   | `replace` | -    |
| replaceVal    | replaceVal | _String_   | `1` | -    |

### 方法

| 方法名 | 参数 | 返回值 | 介绍 |
|------|------|------|------|
| push | `path|pathObj` | - | 路由跳转 |
| replace | `path|pathObj` | - | 路由replace |
| go | `Number` | - | 路由历史切换 |
| back | - | - | 路由历史返回 |
| forward | - | - | 路由历史前进 |
| pushState | `url` | - | window.history.pushState的封装，方便返回确认 |
| replaceState | `url` | - | window.history.replaceState的封装，不影响vue router |


### 导出

```js

export default comp;
export {
    wLocation,
    throughParams,
};

```
