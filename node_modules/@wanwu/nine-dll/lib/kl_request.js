import kl_request, { cancel, initSource } from './kl-local';
import User from '@wanwu/base-user';
import apiResultHandler from './apiResultHandler';
window.hasGotoLogin = false;
kl_request.setOption({
  cbFor401: function cbFor401() {
    if (!window.hasGotoLogin) {
      window.hasGotoLogin = true;
      setTimeout(function () {
        window.hasGotoLogin = false;
      }, 3000);
      User.goToLogin();
    }
  },
  veryFirstResponseInterceptors: [apiResultHandler] // responseInterceptor: [apiResultHandler],
  // responseInterceptor: [(a) => a, a => a]

});
console.log(kl_request); // kl_request.httpBaseInstance.interceptors.response.use(apiResultHandler)

export { cancel, initSource };
export default kl_request;