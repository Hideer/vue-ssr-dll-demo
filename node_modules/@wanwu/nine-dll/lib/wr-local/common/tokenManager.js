import { fn, ua } from '@wanwu/base-fn';
import Config from '@wanwu/mall-web-config';
export var saveToken = function saveToken(token) {
  fn.setCookie(Config.CookieTokenKey, token, {
    path: '/',
    domain: '.wanwudezhi.com',
    expires: 7
  });
  localStorage.setItem(Config.CookieTokenKey, token);
};
export var removeToken = function removeToken() {
  localStorage.removeItem(Config.CookieTokenKey);
  fn.removeCookie(Config.CookieTokenKey, {
    path: '/',
    domain: '.wanwudezhi.com'
  });
};
export var getToken = function getToken(getTokenOnUrl) {
  // 获取用户token值
  var token;

  if (ua.isApp() || ua.isWechatMiniProgram() || getTokenOnUrl) {
    token = fn.getQueryString('token') || fn.getCookie(Config.CookieTokenKey) || localStorage.getItem(Config.CookieTokenKey);

    if (token && token.indexOf('Wwdz (null)') !== -1) {
      token = '';
    }
  } else {
    token = fn.getCookie(Config.CookieTokenKey) || localStorage.getItem(Config.CookieTokenKey);
  }

  return token;
};