import { logPackage } from './log';
const PMonitor = {
    init() {
        this.bindEvent();
    },
    // 事件绑定
    bindEvent() {
        const oldOnload = window.onload;
        window.onload = e => {
            if (oldOnload && typeof oldOnload === 'function') {
                // @ts-ignore
                oldOnload(e);
            }
            // 尽量不影响页面主线程
            // @ts-ignore
            if (window.requestIdleCallback) {
                // @ts-ignore
                window.requestIdleCallback(logPackage);
            }
            else {
                // @ts-ignore
                setTimeout(logPackage(), 0);
            }
        };
    }
};
export default PMonitor;
