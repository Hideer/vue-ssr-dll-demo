"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var log_1 = require("./log");
var PMonitor = {
    init: function () {
        this.bindEvent();
    },
    // 事件绑定
    bindEvent: function () {
        var oldOnload = window.onload;
        window.onload = function (e) {
            if (oldOnload && typeof oldOnload === 'function') {
                // @ts-ignore
                oldOnload(e);
            }
            // 尽量不影响页面主线程
            // @ts-ignore
            if (window.requestIdleCallback) {
                // @ts-ignore
                window.requestIdleCallback(log_1.logPackage);
            }
            else {
                // @ts-ignore
                setTimeout(log_1.logPackage(), 0);
            }
        };
    }
};
exports.default = PMonitor;
